---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { photos, type Photo } from "../../data/photos";

export function getStaticPaths() {
    return photos.map((p) => ({ params: { slug: p.slug }, props: { photo: p } }));
}

const { photo } = Astro.props;
---

<BaseLayout title={`${photo.category} Photo | Friends of Lake Henry`}>
    <div class="container" style="--maxw: 1100px;">
        <section class="card detailCard enter-block">
            <h1 class="detailTitle enter-block delay-1">{photo.category}</h1>
            <div class="detailBack enter-block delay-2">
                <a class="pill" href="/photos">‚Üê Back to Photos</a>
            </div>
            <div class="panel detailPanel enter-block delay-3">
                <img class="detailImg enter-block delay-4" src={photo.src} alt={photo.alt} loading="eager" decoding="async"/>
                <p class="detailCaption enter-block delay-5" >{photo.alt}</p>
                <p class="enter-block delay-6">
                    <a class="pill" href={photo.src} target="_blank" rel="noopener">Open original image</a>
                </p>
            </div>
        </section>
    </div>
    <style>
        .detailCard{
            margin-top: var(--section-gap);
        }

        .detailPanel{
            margin-top: 1rem;
            padding: 1.25rem 1.25rem;
        }

        .detailImg{
            width: 100%;
            height: auto;
            display: block;
            border-radius: 14px;
            object-fit: contain;
            background: var(--gallery-cover);
        }

        /* Caption text */
        .detailCaption{
            margin: 0;
            color: var(--text-strong);
            opacity: .9;
            line-height: 1.6;
        }

        /* Buttons/links row */
        .detailPanel .pill{
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        /* Small phones: make pills full-width for easy tapping */
        @media (max-width: 520px){
            .detailBack .pill,
            .detailPanel .pill{
                width: 100%;
            }
        }
    </style>
</BaseLayout>

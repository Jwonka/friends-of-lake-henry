---
const nav = [
    { href: "/", label: "HOME" },
    { href: "/donors", label: "DONORS" },
    { href: "/events", label: "UPCOMING EVENTS" },
    { href: "/contact", label: "CONTACT US" },
    { href: "/photos", label: "PHOTOS" },
];
---
<header class="header">
    <div class="container inner">
        <div class="brand" aria-label="Friends of Lake Henry">FRIENDS OF LAKE HENRY</div>

        <button
            class="menuBtn"
            type="button"
            aria-label="Open menu"
            aria-expanded="false"
            aria-controls="siteNav"
        >
            <span class="menuIcon" aria-hidden="true"></span>
        </button>

        <nav id="siteNav" class="nav" aria-label="Primary" data-open="false">
            {nav.map((i) => (
                    <a href={i.href} class="navLink">{i.label}</a>
            ))}

            <a
                href="https://www.facebook.com/people/Friends-of-Lake-Henry/61552199315213/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Friends of Lake Henry on Facebook"
                class="social"
            >
                <svg
                    width="22"
                    height="22"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                >
                    <path d="M22.675 0h-21.35C.597 0 0 .597 0 1.326v21.348C0 23.403.597 24 1.326 24h11.495v-9.294H9.691V11.01h3.13V8.309c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24h-1.918c-1.504 0-1.796.715-1.796 1.763v2.313h3.587l-.467 3.696h-3.12V24h6.116C23.403 24 24 23.403 24 22.674V1.326C24 .597 23.403 0 22.675 0z"/>
                </svg>
            </a>
        </nav>
    </div>
</header>
<script>
    const btn = document.querySelector('.menuBtn');
    const nav = document.querySelector('#siteNav');

    if (btn && nav) {
        btn.addEventListener('click', () => {
            const open = nav.getAttribute('data-open') === 'true';
            nav.setAttribute('data-open', String(!open));
            btn.setAttribute('aria-expanded', String(!open));
        });
        nav.addEventListener('click', (e) => {
            const target = e.target;
            if (a) {
                nav.setAttribute('data-open', 'false');
                btn.setAttribute('aria-expanded', 'false');
            }
        });
    }
    /* Global click handler â€” outside */
    document.addEventListener('click', (e) => {
        if (!btn || !nav) return;

        const open = nav.getAttribute('data-open') === 'true';
        if (!open) return;

        const clickedInside = nav.contains(e.target) || btn.contains(e.target);
        if (!clickedInside) {
            nav.setAttribute('data-open', 'false');
            btn.setAttribute('aria-expanded', 'false');
        }
    });
</script>
<style>
    .header{
        position: relative;
        padding: 1.25rem 0;
        top: auto;
        z-index: 200;
        background: var(--surface-veil);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
    }

    .inner{
        min-height: 72px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding: 0.85rem 0;
        gap: 1rem;
    }
    .brand{
        font-weight: 800;
        font-size: 1.8rem;
        letter-spacing: 0.2px;
        color: var(--text);
        text-decoration: none;
        transition: opacity 160ms ease, transform 120ms ease, color 160ms ease;
    }
    .brand:hover,
    .brand:focus-visible{
        opacity: 0.9;
    }
    .nav{ display:flex; align-items:center; gap: 1rem; flex-wrap: wrap; }
    .navLink{
        display: inline-block;
        color: var(--text-soft);
        font-weight: 600;
        text-decoration: none;
        padding: 0.35rem 0.55rem;
        border-radius: 10px;
        transition: background-color 160ms ease, color 160ms ease, transform 120ms ease;
    }

    .navLink:hover,
    .navLink:focus-visible{
        color: var(--text-on-dark);
        opacity: 0.9;
        background: var(--surface-glow-soft);
        transform: translateY(-1px);
    }

    .navLink[aria-current="page"]{
        color: var(--text-on-dark);
        background: var(--brand-tint);
    }
    .nav[data-open="true"]{
        display: flex;
    }

    /* Facebook icon: keep FB blue, give it a clear hover */
    .social{
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: var(--brand-facebook);
        padding: 0.35rem 0.45rem;
        border-radius: 10px;
        transition: background-color 160ms ease, transform 120ms ease, filter 160ms ease;
    }

    .social:hover,
    .social:focus-visible{
        background: var(--brand-facebook-hover);
        transform: translateY(-1px);
    }
    .menuBtn{
        display: none;
        border: 1px solid var(--border-strong);
        background: rgba(0,0,0,0.12);
        color: var(--text);
        border-radius: 12px;
        width: 44px;
        height: 44px;
        align-items: center;
        justify-content: center;
    }

    .menuIcon{
        width: 18px;
        height: 2px;
        background: currentColor;
        position: relative;
        display: block;
    }
    .menuIcon::before,
    .menuIcon::after{
        content:"";
        position:absolute;
        left:0;
        width: 18px;
        height: 2px;
        background: currentColor;
    }
    .menuIcon::before{ top: -6px; }
    .menuIcon::after{ top: 6px; }

    /* Mobile nav behavior */
    @media (max-width: 1035px){
        .inner{
            position: relative; /* anchor for absolute nav */
            align-items: center;
        }

        .brand{
            font-size: 1.35rem;
            line-height: 1.1;
            max-width: calc(100% - 60px); /* prevents overlap with button */
        }

        .menuBtn{
            display: inline-flex;
            flex: 0 0 auto;
        }

        /* Overlay menu: does NOT push content */
        .nav{
            display: none;
            position: absolute;
            right: 0;
            top: calc(100% + .5rem);
            width: min(260px, 92vw);

            padding: .75rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            background: var(--surface-veil);
            backdrop-filter: blur(12px);
            box-shadow: var(--card-shadow-strong);

            flex-direction: column;
            gap: .5rem;
            z-index: 999;
        }

        .nav[data-open="true"]{
            display: flex;
        }

        .navLink{
            width: 100%;
            padding: .75rem 1rem;
            border-radius: 14px;
            text-align: center;
        }

        .social{
            width: 100%;
            justify-content: center;
            padding: .75rem 1rem;
            border-radius: 14px;
        }
        .menuBtn[aria-expanded="true"] .menuIcon{
            background: transparent;
        }
        .menuBtn[aria-expanded="true"] .menuIcon::before{
            top: 0;
            transform: rotate(45deg);
        }
        .menuBtn[aria-expanded="true"] .menuIcon::after{
            top: 0;
            transform: rotate(-45deg);
        }
        .menuIcon::before,
        .menuIcon::after{
            transition: transform 160ms ease, top 160ms ease;
        }
    }
</style>
